FROM cli-arena-base:latest

# Copy repository files
COPY . /repo
WORKDIR /repo

# Install Python dependencies if requirements.txt exists
RUN if [ -f scripts/requirements.txt ]; then pip install -r scripts/requirements.txt; fi
RUN if [ -f requirements.txt ]; then pip install -r requirements.txt; fi

# Install Node.js dependencies if package.json exists
RUN if [ -f package.json ]; then npm install --ignore-scripts || echo "Warning: npm install failed, continuing anyway"; fi

# Env
ENV PYTHONPATH="/repo:$PYTHONPATH"
ENV PATH="/opt/venv/bin:$PATH"
