#!/usr/bin/env bash
# This script provides the solution for the 'security-vulnerability-patch' task.

set -euo pipefail

echo "Solving the 'security-vulnerability-patch' task..."

# 1. Update the vulnerable dependency in the pom.xml file.
# We will replace version 2.14.1 with 2.17.1.
echo "Updating the log4j-core version in app/pom.xml..."
sed -i "s/<version>2.14.1<\/version>/<version>2.17.1<\/version>/g" app/pom.xml

echo "Version updated."
echo "New version in pom.xml:"
grep -A 2 -B 1 "<artifactId>log4j-core</artifactId>" app/pom.xml

# 2. Run the verification script to confirm the solution.
echo "Running the verification script to confirm the fix..."
./verify.sh
